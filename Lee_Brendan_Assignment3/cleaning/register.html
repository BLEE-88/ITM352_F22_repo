<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="./register_style.css" rel="stylesheet">
    <link href="nav.css" rel="stylesheet">
</head>
<body>
  <div class="topnav">
    <a href="index.html">Home</a>
        <a href="display_products.html">Products</a>
        <a href="login.html">Login</a>
        <a href="register.html">Register</a>
        <a href="cart.html">View Cart (<span id="cart_total">0</span>)</a>
  </div>
    <div class="login-box">
    <h2>Sign Up Here!</h2>
            <form id="register_form" action="/register" method="POST">
            <label>Username</label>
            <input type="text" name="username" size="30" placeholder="enter username"></br>
            <br>
            <label>Email</label>
            <input type="email" name="email" size="30" placeholder="enter email"><br/>
            <br>
            <label>Full Name:</label>
            <input type="text" name="fullname" size="30" placeholder="enter full name"><br />
            <br>
            <label>Password:</label>
            <input type="password" name="newpassword" size="30" placeholder="enter password"><br />
            <br>
            <label>Confirm Password:</label>
            <input type="password" name="repeat_password" size="30" placeholder="re-enter password"></br>
            <br>
            <input type="submit" value="Register" name="register_user" id="register">
            </div>
</body>
<script> //Pulls quantity into invoice
    let params = (new URL(document.location)).searchParams; 
    quantities = []; //assume no errors
        for (i = 0; i < products.length; i++) {
            if (params.has(`quantity${i}`)) {
              quantities[i] = params.get(`quantity${i}`);
            }
        }
        if (params.has("error")) {
              let err_msg = "Password%20Too%20Short!";
              alert(err_msg);
              window.location = '/products_display.html';
          }
function generate_item_rows(product_quantities_array) {
  for (i=0; i<product_quantities_array.length; i++) {
    quantity = product_quantities_array[i];
    errors = isNonNegativeInteger(quantity, true);
    if(quantity == 0) {
      continue;
    }
    if(errors.length == 0) {
      extended_price = quantity * products[i].price;
      subtotal += extended_price;
    } else {
      extended_price = 0;
      quantity = `<div style="color:red;">${quantity}<br>${errors.join("<br>")}</span>`;
    }
  }};
  function isNonNegativeInteger(queryString, returnErrors = false) {
            errors = []; // assume no errors at first
            if (Number(queryString) != queryString) errors.push('Not a number!'); // Check if string is a number value
            if (queryString < 0) errors.push('Negative value!'); // Check if it is non-negative
            if (parseInt(queryString) != queryString) errors.push('Not an integer!'); // Check that it is an integer

            if (returnErrors) {
                return errors;
            } else if (errors.length == 0) {
                return true;
            } else {
                return false;
            }
        }

  </script>
</html>